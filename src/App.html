<header>
  <h1>Admin Website</h1>
  <nav>
    <ul>
      <!-- <li><Link to='/home'>Home</Link></li> -->
      {{#if user2.loggedIn}}
        staus: logged in
        <li><a href='' on:click='logout()'>Logout</a></li>
        <!-- <li><Link to='/doctors'>Doctors</Link></li> -->
      {{else}}
        status: logged out
        <li><Link to='/login'>Login</Link></li>
      {{/if}}
      <!-- <li><Link to='/about/alice'>About <strong>Alice</strong></Link></li> -->
    </ul>
  </nav>
</header>

<div id='content'></div>

<style>
  header {
    font-size: 1em;
    font-family: 'Helvetica', 'Arial', sans-serif;
    color: #444444;
  }
</style>

<script>
  import createRouter from './services/createRouter';
  import Login from './components/Login.html';
  import Home from './components/Home.html';
  import About from './components/About.html';
  import Doctors from './components/Doctors.html';
  import Link from './components/Link.html';

  const router = createRouter({
    '/': Home,
    '/home': Home,
    '/login': Login,
    '/doctors': Doctors,
    '/about/:name': About,
  });

  export default {
    data () {
      console.log('data');
      return {
        user2: {loggedIn: false}
      }
    },
    onrender() {
      console.log('onrender');
      router.start(window.location, window.document.querySelector('#content'));
      const user = localStorage.getItem('user');
      if(user) {
        console.log('there is a user in localStorage');
        this.set({ user2: {loggedIn: true} });
        return;
      }
    },

    onteardown() {
      router.teardown();
    },

    components: {
      Login,
      Link,
      Home,
      About,
    },

    methods: {
      logout() {
        event.preventDefault();
        console.log(event, 'logout');
        localStorage.removeItem('user');
        this.set({ user2: {loggedIn: false} });
      }
    }
  }
</script>
